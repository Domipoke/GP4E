<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GP4E</title>
</head>
<body>
    <style>
        body {
            padding: 0;
            margin:0;
        }
        #dbar {
            background-color: #006469;
            padding: 5px;
            margin:0;
            width: 100%
        }
        #bar {
            float:right
        }
        #btn {
            background: none;
            border: none;
            outline: none;
            padding: 0;
            margin: 5px;
            font-size: 32px;
            height: 30px;
            display: block;
        }
        .g-signin2 {
            float: right;
        }    
    </style>
    <table id="dbar">
        <tr >
            <td><Button id="btn" onclick="toggleBar()">^</Button></td>
            <td id="bar">
                <Button onClick="openLoginPopup()">Login</Button>
            </td>
        </tr>    
    </table>
    <div id="info"></div>
    
    <script src="jquery/jquery-3.6.0.min.js"></script>
    <script src="anime-master\anime-master\lib\anime.min.js"></script>
    <script src="user-helper\user.js"></script>
    <script src="utility/switch.js"></script>
    <script>
        window.onload = function () {
             
        }
        function onSignIn(user) {
            console.log(user)
            console.log()
        }
        function openLoginPopup() {
            var w = 500 
            var h = 500
            var lg = window.open(
                "",
                "",
                "popup=yes,width="+w+
                ",height="+h
            )
            code = function () {
                var x = Math.floor(Math.random()*100000)
                var y = x.toString().split('')
                for (y.length;y.length<5;y.unshift(0)) {}
                return y.join("")
            }

            //+"left="+((window.innerWidth-w)/2)+
            //"top="+((window.innerHeight-h)/2)
            var form = document.createElement("form")
            var lb = document.createElement("label")
            lb.setAttribute("for","to")
            var input = document.createElement("input") 
            input.type="text"
            input.name="to"
            input.id="to"
            form.appendChild(input)
            form.appendChild(lb)
            var btn = document.createElement("input")
            btn.type = "submit";
            btn.value="Send"
            form.appendChild(btn)
            form.action=
            `<?php`+
            `$from = "assistenzagp4e@gmail.com"`+
            `$to = ""`+
            `$message = '`+
            `Benvenuto sul sito di GP4E`+
            `Il tuo codice di verifica Ã¨: `+code()+
            `'`+
            `$headers = array(`+
                `'From' => $from,`+
                `'Reply-To' => 'webmaster@example.com'`+
            `);`+

            `mail($to,"Codice di verifica GP4E",$message,$header)`+
            `?>`
            
            lg.body.appendChild(form)
        }
        function toggleBar() {
            if (document.querySelector("#bar").style.display=="block") {
                anime({
                    targets: "#btn",
                    rotateZ: 180,
                    duration: 500
                }).finished.then(function () {
                    anime({
                        targets: "#dbar",
                        translateY: "-18",
                        duration: 500
                    }).finished.then(document.querySelector("#bar").style.display = "none")
                })
            } else {
                anime({
                    targets: "#btn",
                    rotateZ: 0,
                    duration: 500
                }).finished.then(function () {
                    anime({
                        targets: "#dbar",
                        translateY: "0",
                        duration: 500
                    }).finished.then(document.querySelector("#bar").style.display = "block")
                })
            }
            
            
            
        }
    </script>
</body>
</html>